---
title: "Unix与Linux学习之路"
categories:
  - Blog
tags:
  - 学习之路
  - Linux
toc: true
---

## General Knowledge

* The Open Group(Unix): <http://opengroup.org/subjectareas/platform/unix>
* Unix History: <https://www.levenez.com/unix/>
* UNIX System V: <https://en.wikipedia.org/wiki/UNIX_System_V>
* Shebang (Unix): <https://en.wikipedia.org/wiki/Shebang_(Unix)>

* MenuetOS(Menuet isn't based on other operating system nor has it roots within UNIX or the POSIX standards.): <http://www.menuetos.net/index.htm>

* The Linux Kernel Archives: <https://www.kernel.org/>
* Elixir Cross Referencer: <https://elixir.bootlin.com/linux/latest/source>
* Linux online: <https://code.woboq.org/linux/linux/>
* VGER.KERNEL.ORG(provide email list services for the linux kernel developers): <http://vger.kernel.org/>
* GNU Operating System: <http://www.gnu.org/>
* Free Software Foundation (FSF): <https://www.fsf.org/>
* Linux Professional Institute(LPI is the global certification standard and career support organization for open source professionals): <http://www.lpi.org/>
* <https://en.wikipedia.org/wiki/Linux>
* <http://distrowatch.com/index.php>
* Linux Packages Search: <https://pkgs.org/>
* RPM Fusion(RPM Fusion provides software that the Fedora Project or Red Hat doesn't want to ship): <http://rpmfusion.org/>
* Linux From Scratch: <http://www.linuxfromscratch.org/>

## Linux Distributions

* Ubuntu: <https://www.ubuntu.com>
* Ubuntu Wiki: <https://wiki.ubuntu.com/>
* deepin: <https://www.deepin.org/>
* Debian: <http://www.debian.org/>
* Fedora: <http://fedoraproject.org/>
* CentOS: <https://www.centos.org/>
* rethat: <https://www.redhat.com>
* openSUSE: <https://www.opensuse.org/>
* opensuse-guide: <https://lug.ustc.edu.cn/sites/opensuse-guide/>
* manjaro: <https://manjaro.org/>

* 鳥哥的 Linux 私房菜: <http://linux.vbird.org/>

## Softwares/Tools/Knowledge

* 一篇文章搞懂Debian_Ubuntu软件包更新和删除: <https://www.cnblogs.com/jiangxinnju/p/14017675.html>
* 扩容swap文件: <https://www.cnblogs.com/jiangxinnju/p/17938602>
* Linux压缩与解压常用命令: <https://www.cnblogs.com/jiangxinnju/p/6055870.html>
* linux中无 conio.h的解决办法: <https://www.cnblogs.com/jiangxinnju/p/5516906.html>
* Linux快捷键: <https://www.cnblogs.com/jiangxinnju/p/6045204.html>
* ssh相关原理学习与常见错误总结: <https://www.cnblogs.com/jiangxinnju/p/7859488.html>

* Linux命令大全: <http://man.linuxde.net/>
* explainshell: <https://explainshell.com/>
* tldr: <https://github.com/tldr-pages/tldr>
* Nushell: <https://www.nushell.sh/>

* Install Microsoft Windows Fonts in Ubuntu: <https://www.ostechnix.com/install-microsoft-windows-fonts-ubuntu-16-04/>
* Linux Performance: <http://www.brendangregg.com/linuxperf.html>
* File system: <https://en.wikipedia.org/wiki/File_system>
* Linux-HA: <http://www.linux-ha.org>
* Unix Shells: Bash, Fish, Ksh, Tcsh, Zsh: <http://hyperpolyglot.org/unix-shells>
* Shell 编程: Bash空格的那点事: <http://justcoding.iteye.com/blog/1944238>
* Shell编程: Bash引号的那点事: <http://justcoding.iteye.com/blog/1944239>
* 基于CentOS的Linux基本网络配置,包括网卡eth0、DNS、Host等: <http://www.cnblogs.com/rooney/archive/2012/03/24/2415144.html>
* su cannot set user id Resource temporarily unavailable故障解决 : <http://blog.itpub.net/12457158/viewspace-753400>
* Linux查看物理CPU个数、核数、逻辑CPU个数: <http://www.cnblogs.com/bugutian/p/6138880.html>
* Linux查看CPU信息、机器型号等硬件信息: <http://www.51testing.com/html/38/225738-210333.html>
* 理解inode: <http://www.ruanyifeng.com/blog/2011/12/inode.html>
* rm参数列表过长: <http://blog.sina.com.cn/s/blog_63a2aa330100v2ax.html>
* Unix/Linux如何同时统计多文件夹下文件、文件夹的个数: <http://bbs.51cto.com/thread-1083941-1-1.html>
* Linux shell脚本的字符串截取: <http://www.cnblogs.com/wangbin/archive/2011/10/11/2207179.html>
* Linux 技巧: Bash 参数和参数扩展: <https://www.ibm.com/developerworks/cn/linux/l-bash-parameters.html>
* 理解Linux系统的日志: <http://blog.donews.com/zhaiming/archive/2006/12/01/1088458.aspx>
* linux时间和时区修改（附suse）: <http://chopper.blog.51cto.com/3946170/1095274>
* linux中时间设置date、hwclock、clock：<http://lomomo.blog.51cto.com/65441/277618>
* Linux&Windows双系统时间不一致解决方案: <https://blog.csdn.net/sunchengyun/article/details/126995040>
* 通过命令行查找一个IP的地理位置信息: <http://www.geekfan.net/7863/>
* 多终端管理器tmux使用详解: <http://blog.csdn.net/stelalala/article/details/9025691>
* Linux系统里如何彻底的清空屏幕？: <http://www.vaikan.com/how-to-clear-the-terminal-screen-for-real-in-case-of-linux/>
* 如何在Linux上将HTML页面转化成png图片: <http://linux.cn/article-2708-1.html>
* Ubuntu输入密码登陆后又跳回到登录界面: <https://askubuntu.com/questions/223501/ubuntu-gets-stuck-in-a-login-loop>
* LNMP安装快速导航（官网教程）: <http://lnmp.org/install.html>
* ubuntu删除旧内核和多余启动项: <https://askubuntu.com/questions/2793/how-do-i-remove-old-kernel-versions-to-clean-up-the-boot-menu>
* 各个Linux版本的本地root密码破解方法: <http://os.51cto.com/art/200910/159523.htm>
* Linux 软件看门狗 watchdog: <http://blog.csdn.net/liigo/article/details/9227205>
* C语言调试手段:锁定错误的实现方法: <http://blog.csdn.net/huangblog/article/details/8281165>
* Linux终端字符颜色设置: <http://blog.csdn.net/fuyajun01/article/details/7931934>
* hexdump命令使用: <http://blog.csdn.net/zybasjj/article/details/7874720>
* ubuntu下终端路径只显示当前目录: <http://www.cnblogs.com/king-77024128/articles/2270487.html>
* linux连接投影机: <http://www.2cto.com/os/201211/168387.html>
* Devhelp: <https://wiki.gnome.org/Apps/Devhelp>
* Unix 即集成开发环境: <https://github.com/ConanChou/Unix-as-IDE--Chinese->
* Linux Troubleshooting Cheatsheet: strace, htop, lsof, tcpdump, iftop & sysdig: <https://sysdig.com/blog/linux-troubleshooting-cheatsheet/>
* strace: <https://github.com/strace/strace>
* java.lang.VerifyError: Expecting a stackmap frame at branch target JDK 1.7: <http://stackoverflow.com/questions/15122890/java-lang-verifyerror-expecting-a-stackmap-frame-at-branch-target-jdk-1-7>
* 将Linux下编译的warning警告信息输出到文件中[整理笔记]: <http://blog.csdn.net/feihongwang/article/details/6975670>
* linux C中调用shell命令和运行shell脚本: <http://blog.sina.com.cn/s/blog_8043547601013rxf.html>
* find 删除拷贝用法: <http://6764097.blog.51cto.com/6754097/1795690>
* linux 修改分区卷标 ( Partition Label ) : <http://blog.chinaunix.net/uid-20321915-id-1966428.html>
* shell脚本“syntax error:unexpected end of file”解决方案 : <http://renyongjie668.blog.163.com/blog/static/1600531201172803244846/>
* String contains in Bash: <http://stackoverflow.com/questions/229551/string-contains-in-bash>
* Could not get lock /var/lib/apt/lists/lock - open: <http://blog.csdn.net/zyxlinux888/article/details/6358615>
* Slow Server? This is the Flow Chart You're Looking For: <http://blog.scoutapp.com/articles/2014/07/31/slow_server_flow_chart>
* 设置Linux系统的空闲等待时间TMOUT: <http://zzkai.blog.51cto.com/804611/1352964>
* Linux下chkconfig命令详解: <http://www.cnblogs.com/panjun-Donet/archive/2010/08/10/1796873.html>
* linux下如何关闭防火墙？如何查看防火墙当前的状态: <http://www.cnblogs.com/8899man/p/5899176.html>
* TCP 连接断连问题剖析: <http://www.ibm.com/developerworks/cn/aix/library/0808_zhengyong_tcp/>
* ethtool的基本设置: <http://www.cnblogs.com/fbwfbi/p/3612658.html>
* Shell脚本: 判断用户和用户组是否已经存在/创建用户和用户组: <http://blog.csdn.net/bluishglc/article/details/42060223>
* nc命令用法举例: <http://www.cnblogs.com/nmap/p/6148306.html>
* How to Manage ‘Systemd’ Services and Units Using ‘Systemctl’ in Linux: <https://www.tecmint.com/manage-services-using-systemd-and-systemctl-in-linux/>
* linux中screen命令的用法: <http://www.9usb.net/201002/linux-screen-mingling.html>
* linux 下script命令记录终端会话: <http://blog.chinaunix.net/uid-25885064-id-3430216.html>
* 记录终端下的操作（tee）: <http://os.chinaunix.net/a2008/0810/986/000000986568.shtml>
* Shell脚本交互之: 自动输入密码: <http://blog.csdn.net/zhangjikuan/article/details/51105166>
* Shell中重定向<<EOF注意事项: <http://blog.csdn.net/iamlaosong/article/details/40509399>
* linux 终端backspace不能删除字符: <http://blog.163.com/chen_cong_520/blog/static/841151912010829240926/>
* Fedora 删除旧内核: <http://www.cnblogs.com/william-lee/archive/2011/07/23/2115084.html>
* linux关于S权限和T权限的介绍: <http://blog.csdn.net/qq_35116353/article/details/56049592>
* Linux使用技巧12--Ubuntu代理: <http://blog.csdn.net/lincyang/article/details/51306367>
* Bash的陷阱: <https://charlee.li/bash-pitfalls.html>
* Linux命令之file - 检测并显示文件类型: <https://codingstandards.iteye.com/blog/804463>
* Linux Centos 删除除某(多)个文件之外的所有文件: <https://blog.csdn.net/weixin_33994429/article/details/86363583>
* linux如何删除zip包中某个文件夹及里面的内容: <https://zhidao.baidu.com/question/2074079962247221788.html>
* GPG入门教程: <https://www.ruanyifeng.com/blog/2013/07/gpg.html>

* Linux下好玩的命令: <http://www.cnblogs.com/joeyupdo/articles/2768113.html>
* 动画演示一些无用但有趣的Linux命令: <http://www.vaikan.com/10-funny-liunx-command/>
* Linux中10个有用的命令行补齐命令: <http://www.geekfan.net/8169/>
* Linux中的10个链接操作符: <http://linux.cn/thread/12205/1/1/>

* wine: <https://www.winehq.org/>
* Winetricks: <https://wiki.winehq.org/Winetricks>
* fswatch: <https://github.com/emcrisostomo/fswatch>
* Compiz: <http://www.compiz.org/>
* 新立得(Synaptic): <http://www.nongnu.org/synaptic/>
* gparted: <https://gparted.org/>
* GLX-Dock: <http://www.glx-dock.org/>
* vncview: <https://www.realvnc.com/en/connect/download/viewer/>
* PDFtk: <https://www.pdflabs.com/>
* Master PDF Editor for Linux:<https://code-industry.net/free-pdf-editor/>
* Okular: <https://okular.kde.org/>
* AppImage(Package desktop applications as AppImages that run on common Linux-based operating systems): <http://appimage.org/>
* shunit2: <https://github.com/zandev/shunit2>
* iPerf / iPerf3: <https://iperf.fr/>
* Glances: <https://github.com/nicolargo/glances/>
* Atop: <http://www.atoptool.nl/index.php>
* htop: <https://sourceforge.net/projects/htop/>
* iftop: <http://www.ex-parrot.com/~pdw/iftop/>
* Iotop: <http://guichaz.free.fr/iotop/>
* lrzsz(串口传输文件): <http://www.cnblogs.com/lidabo/p/4780866.html>
* httpry(HTTP logging and information retrieval tool ): <https://github.com/jbittel/httpry>
* iproute2: <https://en.wikipedia.org/wiki/Iproute2>
* GNU Binutils(objdump/gprof/strings): <https://sourceware.org/binutils/>
* indent: <https://www.gnu.org/software/indent/>
* cproto: <https://sourceforge.net/projects/cproto/>
* ttyrec 和 ttyplay(记录、保存和播放终端会话软件): <http://0xcc.net/ttyrec/>
* curl: <https://curl.haxx.se/>
* Poptop - The PPTP Server for Linux: <http://poptop.sourceforge.net/dox/>
* Linux Extended BPF (eBPF) Tracing Tools: <http://www.brendangregg.com/ebpf.html>

* grep_sed_awk练习: <https://www.cnblogs.com/jiangxinnju/p/17938752>

* GNU Grep: <http://www.gnu.org/software/grep/>
* ack: <http://beyondgrep.com/>

* gawk: <http://www.gnu.org/software/gawk/>
* GNU sed: <http://www.gnu.org/software/sed/>

## Linux常用命令

```shell
    # 先尝试man再尝试google
    man xxx

    sha1sum/md5sum
    find "/etc/" -name "*" -type f | xargs wc -l | awk '{print $2" "$1"lines"}' # 打印某一文件夹下的所有文件名及其行数

    mtools # mtools 命令用于显示mtools 支持的指令。mtools 实际上是一个命令集合，是DOS 文件系统的工具程序，它可以模拟许多MS-DOS命令，使用起来非常方便。使用权限是所有用户。

    # set the system's date from a remote host
    # sudo apt-get install rdate
    rdate

    grep -R "org.apache.commons.FileUtils" *
    grep -inr --color "ERROR" test_debug.log
    ps –fu $USER | grep java # 显示当前用户的所有线程
    ps -ef | grep 4736 # 查看4736端口是否被占用
    ps -aux
    ps -ef                 # 查看所有进程
    netstat -tulnp | grep mysqld # 查看mysqld的监听情况
    netstat –apn | grep pid   #先查进程号，再找到进程信息
    netstat -lntp          # 查看所有监听端口
    netstat -antp          # 查看所有已经建立的连接
    netstat -anp | grep xxxx   #xxxx为端口号 Linux下查看某个端口下运行的是什么程序
    netstat -s             # 查看网络统计信息进程
    find . –name "*.log" | xargs grep error # 在当前目录的所有日志文件中查找关键词"error"
    ls -t `find . -name "*.log"` #列出最近修改的文件
    glxinfo | grep rendering # 查询OpenGL是否打开。提示: direct rendering: Yes 表明启动正常
    glxgears # glxgears是一个测试你的Linux是否可以顺利运行2D、3D的测试软件。

    watch "ls -al myfile" 监控文件变化

    cat /etc/issue # 查看当前操作系统发行版信息

    apt-cache # query the APT cache
    apt-file search libz.so.1 # APT package searching utility
    apt-cdrom # apt-cdrom is a tool to add CDROM's to APT's source list.
    dpkg

    sudo sh *.sh # 打开.sh文件
    ./*** # 打开其它可执行文件,如果没有可执行权限，需要chmod

    man nautilus
    man ed

    file explore

    xdg-open # 命令行快速打开各类型文件
    mplayer xxx.mp3 # 使用mplayer打开

    fc-list :lang=zh-cn # 查看字体

    uname -a               # 查看系统信息
    head -n 1 /etc/issue   # 查看操作系统版本
    hostname               # 查看计算机名,hostname name只能暂时修改，重启后失效，如果需要永久修改，使用/etc/hostname文件
    lspci -tv              # 列出所有PCI设备。PCI和PCI Express，是计算机常使用的一种高速总线。操作系统中的PCI/PCI-E设备驱动以及操作系统内核，都需要访问PCI及PCI-E配置空间。PCI/PCI-E设备的正常运行，离不开PCI/PCI-E配置空间。通过读写PCI/PCI-E配置空间，可以更改设备运行参数，优化设备运行。本文介绍用户空间可以读取、修改、扫描PCI/PCIE设备的用户命令及使用。在Linux内核中，为PCI和PCI-E只适用了一种总线PCI（内核提供的总线系统），故访问PCI-E配置空间，也包括了PCI设备配置空间。
    lsusb -tv              # 列出所有USB设备
    lsmod                  # 列出加载的内核模块
    env                    # 查看环境变量资源
    df -h                  # 查看各分区使用情况
    df -i                   # 查看inode使用
    du -sh <目录名>        # 查看指定目录的大小
    du --max-depth=1 dir   # 查看指定目录指定深度的大小
    grep MemTotal /proc/meminfo   # 查看内存总量
    grep MemFree /proc/meminfo    # 查看空闲内存量
    uptime                 # 查看系统运行时间、用户数、负载
    cat /proc/loadavg      # 查看系统负载磁盘和分区
    mount | column -t      # 查看挂接的分区状态
    fdisk -l               # 查看所有分区
    cfdisk -Ps # 查看磁盘分区的用法   cfdisk   -Ps 磁盘设备名 只有一个硬盘也可以用 cfdisk -Ps
    cfdisk -Ps /dev/sda
    sfdisk -l
    hdparm -i /dev/hda     # 查看磁盘参数(仅适用于IDE设备)
    dmesg | grep IDE       # 查看启动时IDE设备检测状况网络
    ifconfig               # 查看所有网络接口的属性
    route -n               # 查看路由表
    top                    # 实时显示进程状态用户
    w                      # 查看活动用户
    id <用户名>            # 查看指定用户信息
    last                   # 查看用户登录日志
    cut -d: -f1 /etc/passwd   # 查看系统所有用户
    cut -d: -f1 /etc/group    # 查看系统所有组
    crontab -l             # 查看当前用户的计划任务服务
    rpm -qa                # 查看所有安装的软件包
    rpm -q mysql   # 查看是否安装了mysql客户端

    lsof -i :xxxx    #xxxx为端口号

    cat /proc/version # 查看内核版本命令
    lsb_release -a ##查看linux版本
    cat /etc/debian_version
    cat /etc/issue
    file /bin/bash
    file /bin/cat
    cat /etc/debian_version //Only for Debian
    cat /etc/redhat-release //Only for Redhat
    rpm -q redhat-release //Only for Redhat
    redhat-release-5Server-5.6.0.3

    # 注:这种方式下可看到一个所谓的release号，比如上边的例子是5，这个release号和实际的版本之间存在一定的对应关系，如下:
    # redhat-release-3AS-1 -> Redhat Enterprise Linux AS 3
    # redhat-release-3AS-7.4 -> Redhat Enterprise Linux AS 3 Update 4
    # redhat-release-4AS-2 -> Redhat Enterprise Linux AS 4
    # redhat-release-4AS-2.4 -> Redhat Enterprise Linux AS 4 Update 1
    # redhat-release-4AS-3 -> Redhat Enterprise Linux AS 4 Update 2
    # redhat-release-4AS-4.1 -> Redhat Enterprise Linux AS 4 Update 3
    # redhat-release-4AS-5.5 -> Redhat Enterprise Linux AS 4 Update 4

    # man update-alternatives

    # Configure参数解释说明: autoconf: 16 Running configure Scripts

    # 把/dev/cdrom目录制作为镜像，名字为/root/rh1.iso，可以使用下面命令中的任意一条
    dd if=/dev/cdrom of=/root/rh1.iso
    #cat /dev/cdrom >;/root/1.iso
    mkisofs -r -o myiso.iso /dev/cdrom
    cp -r /home/user name.iso

    # man tailf
    # Linux下分割合并文: man split/cat
    # 生成目录树结构: man tree

    # 重命名文件
    rename

    # 切换用户并执行一条命令
    su - oracle -c command
    # 切换用户并执行一个shell文件
    su - oracle -s /bin/bash shell.sh
```

## 修改文件打开方式

* 全局配置：`/usr/share/applications/defaults.list`
* 用户配置：`~/.local/share/applications/mimeapps.list`

例如配置iso类型文件的打开方式一般默认是archive manager，如果想修改为nero，可以添加：`application/x-cd-image=nerolinux.desktop;`，然后图形界面下双击iso文件就使用nero打开了。

## Linux重装系统指南(Ubuntu)

* 安装金山wps，解决字体问题

```shell
     fedora:/opt/kingsoft/wps-office/office6/wps: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory
     yum install libstdc++-devel.i686
```

* 卸载libreoffice/firefox/youker-assistant/amazon
* 重新启动计算机
* 安装GLX-Dock并进行配置
* 安装快盘，进行配快盘和ubuntu one
* 安装okular/meld
* 卸载Rhythmbox/empathy/account-plugin-*
* 安装font-manager

## Linux重装系统指南(Fedora)

* 安装gnome-tweak-tool设置工具
* sudo yum install gnome-tweak-tool
* 安装后在左上角【活动】里可以找到【优化工具】图标打开进行设置
* 安装最快软件源插件: sudo yum install yum-plugin-fastestmirror
* 安装下载加速插件: sudo yum install yum-presto -y
* 安装鼠标右键【在终端中打开】: sudo yum install nautilus-open-terminal
* 配置RPM Fusion
* 安装相关软件:gcc/Yumex/Compiz(ccsm)/Cariodock
* 设置自动挂载文件系统fstab

## ubuntu更新问题

更新管理器在检查软件包的时候总是有如下问题

    无法下载 cdrom://Ubuntu 8.10 _Intrepid Ibex_ - Release i386 (20081029.5)/dists/intrepid/main/binary-i386/Packages  请使用 apt-cdrom，通过它就可以让 APT 能识别该光盘。apt-get upgdate 不能被用来加入新的光盘。
    无法下载 cdrom://Ubuntu 8.10 _Intrepid Ibex_ - Release i386 (20081029.5)/dists/intrepid/restricted/binary-i386/Packages  请使用 apt-cdrom，通过它就可以让 APT 能识别该光盘。apt-get upgdate 不能被用来加入新的光盘。
    无法下载 http://cn.archive.ubuntu.com/ubuntu/dists/intrepid-backports/main/binary-i386/Packages.bz2  Hash 校验和不符
    有一些索引文件不能下载，它们可能被忽略了，也可能转而使用了旧的索引文件。

解决方法: 把 /etc/apt/sources.list里面有cdrom的几行删掉，或者利用软件中心或新立德包管理器把软件源终中的cdrom去掉。

## libreoffice中PPT字体便粗问题

Tools → Options... → LibreOffice → View → Graphics output (取消钩选Use hardware acceleration)

## 主文件夹里的中文文件夹改成英文文件夹

打开终端，在终端下输入命令:

```shell
    export LANG=en_US
    xdg-user-dirs-gtk-update
```

这个时候会弹出一个配置界面，提示是否将中文目录切换为英文目录。选中不再提示，确定。系统会删除没有内容的中文目录，而有内容的目录会保持。并创建8个相应的英文目录如下: “Desktop”、“Download”、“Templates”、“Public”、“Documents”、“Music”、“Pictures”、“Videos”。此时，您在“位置”里看到的常用中文目录已经变成英文目录；

再执行:

```shell
    export LANG=zh_CN.UTF-8
```

## 重装Ubuntu如何保留/home分区中的数据

windows系统可以在重装时只格式化C盘，从而保留其他分区的数据。 Ubuntu系统也可以，只要在安装系统时分出一个/home分区。你可以把Ubuntu的“/”分区看为windows的C盘，重装Ubuntu时只格式化“/”分区，不格式化“/home”，这样就可以保留“/home”中的数据

## 如何启用 Ubuntu 中的 root 帐号

和其它发行版本的Linux不同，Ubuntu Linux有一个与众不同的特点，那就是初次使用时，你无法作为root来登录系统，为什么会这样？这就要从系统的安装说起。对于其他Linux系统来说，一般在安装过程就设定root密码，这样用户就能用它登录root帐户或使用su命令转换到超级用户身份。与之相反，Ubuntu默认安装时，并没有给root用户设置口令，也没有启用root帐户。问题是要想作为root用户来运行命令该怎么办呢？没关系，我们可以使用sudo命令达此目的。sudo是linux下常用的允许普通用户使用超级用户权限的工具，该命令为管理员提供了一种细颗粒度的访问控制方法，通过它人们既可以作为超级用户又可以作为其它类型的用户来访问系统。这样做的好处是，管理员能够在不告诉用户root密码的前提下，授予他们某些特定类型的超级用户权限，这正是许多系统管理员所梦寐以求的。这里有必要说先简单一下sudo和su命令的区别: su命令是在不退出当前用户的情况下切换用户的工具，通过su可以在用户之间切换，如果超级权限用户root向普通或虚拟用户切换不需要密码，而普通用户切换到其它任何用户都需要密码验证。sudo是Unix/Linux平台上的一个非常有用的工具，它允许系统管理员分配给普通用户一些合理的“权利”，让他们执行一些只有超级用户或其他特许用户才能完成的任务这样一来，就不仅减少了root用户的登陆次数和管理时间，也提高了系统安全性。sudo设计者的宗旨是: 给用户尽可能少的权限但仍允许完成他们的工作。我们可以简单的理解成: su获得稳定的超级用户（或其他用户权限），sudo获得暂时性的限制了的超级用户权限，一段时间之后会失效。

好，下面讲一下具体的设置方法:

1.为root设置一个root密码: $ sudo passwd root

之后会提示要输入root用户的密码，连续输入root密码

2.使用: $ su,并按照提示输入root密码，就可以在终端中切换成超级管理员用户身份了！

## Linux用户添加sudoer

使用sudo可以在以非root用户登录时临时获得root权限，并执行需要的命令。可以使用sudo的用户可以叫做sudoer。

添加sudoer的方法（假设您已经安装sudo）: 执行

    visudo or sudoedit

提示: 有些发行版的sudo提供了sudoedit，有的则提供了visudo，功能上基本是一样的。你也可以使用其他编辑器如vi进行编辑/etc/sudoers，但由于文件是只读的，请强制保存（如w!）或去除只读属性再保存。查找

    root ALL=(ALL) ALL

在下面加入

    %adm ALL=(ALL) ALL

如果sudo时不想输入密码，可以把上句改成:

    %adm ALL=(ALL) NOPASSWD: ALL

保存文件，然后执行

    gpasswd -a 用户名 adm

然后这个用户就可以用sudo了。

## linux无root权限安装软件

在有些公司是不会给开发人员root权限的，但是开发人员有时候也需要装一些软件。没有root权限是否可以成功安装软件呢？答案是yes。本文以安装nginx为例说明下如何操作。

没有root权限时往往也就没有权限操作一些系统目录，例如bin，usr等。所以在安装时需要配置将安装文件装在当前用户有权限操作的目录。

安装nginx首先要下载安装文件，具体的安装步骤如下:

```shell
    tar-zvxf nginx-1.2.3.tar.gz # 解压缩文件:
    cd ~
    mkdir nginx
    cd xxx
    ./configure—prefix=/xxx/yy/nginx
    make
    make install
```

正常情况下这样就成功安装了。和有root权限安装的区别在于./configure 需要指定安装文件的目录

## linux系统下无法访问电脑硬盘

```log
    Error mounting /dev/sda6 at /media/qiaokaiming/20F47472F4744BD2: Command-line 'mount -t "ntfs" -o "uhelper=udisks2,nodev,nosuid,uid=1000,gid=1000,dmask=0077,fmask=0177" "/dev/sda6" "/media/qiaokaiming/20F47472F4744BD2"' exited with non-zero exit status 14: The disk contains an unclean file system (0, 0).
    Metadata kept in windows cache, refused to mount.
    Failed to mount '/dev/sda6': Operation not permitted
    The NTFS partition is in an unsafe state. Please resume and shutdown
    windows fully (no hibernation or fast restarting), or mount the volume
    read-only with the 'ro' mount option.
```

那个提示里有: Please resume and shutdown windows fully (no hibernation or fast restarting)。进win8把”快速启动“关掉就好了。控制面板》所有控制面板选项》电源选项》系统设置》关闭“启用快速启动”

## /etc/profile和/etc/environment(Ubuntu)

先将export LANG=zh_CN加入/etc/profile ,退出系统重新登录，登录提示显示英文。将/etc/profile 中的export LANG=zh_CN删除，将LNAG=zh_CN加入/etc/environment，退出系统重新登录，登录提示显示中文。

原因是系统是先执行/etc/environment，后执行/etc/profile。/etc/environment是设置整个系统的环境，而/etc/profile是设置所有用户的环境，前者与登录用户无关，后者与登录用户有关。系统应用程序的执行与用户环境可以是无关的，但与系统环境是相关的，所以当你登录时，你看到的提示信息，象日期、时间信息的显示格式与系统环境的LANG是相关的，缺省LANG=en_US，如果系统环境LANG=zh_CN，则提示信息是中文的，否则是英文的。登陆系统时shell读取的顺序应该是 :

/etc/enviroment->/etc/profile-->$HOME/.profile-->$HOME/.env(如果存在)

如果同一个变量在用户环境(/etc/profile)和系统环境(/etc/environment)有不同的值那应该是以用户环境为准了。修改environment 之后，执行 source /etc/environment 可以立即生效。

## 如何在Ubuntu中屏蔽一个网站

打开/etc/hosts文件，添加下面这行

    127.0.0.1 domain.com

更换domain.com为你要屏蔽的网站，你完成了编辑处理后，保存该文件并退出。

## Windows/Linux文本文件格式转换

DOS/Windows和Linux/Unix的文本文件换行格式不同，基于 DOS/Windows 的文本文件在每一行末尾有一个 CR（回车）和 LF（换行），而 UNIX 文本只有一个LF（换行）。

DOS/Windows文本文件格式转换成Linux/Unix文本文件格式: `sed -e 's/.$//' mydos.txt > myunix.txt`

说明: 替代正则表达式与一行的最末字符匹配，而该字符恰好就是回车。我们用空字符替换它，从而将其从输出中彻底删除。

把Linux/Unix 文本文件格式转换成 DOS/Windows文本文件格式: `sed -e 's/$/\r/' myunix.txt > mydos.txt`

说明: '$' 正则表达式将与行的末尾匹配，而 '\r' 告诉 sed 在其之前插入一个回车。在换行之前插入回车，每一行就以 CR/LF 结束。

另外还有个方法，使用命令:

```shell
    unix2dos filename
    dos2unix filename
```

## 获取某程序的完整路径名

当我们在Linux下用ps aux 看到有如下一个进程时:

    root     19463  0.0  0.0   1508   272 pts/0    S    16:43   0:00 ./server-a

如何获得程序server-a所在的完整路径呢？从上面ps 的输出中可以看出19463是server-a的PID号，那么运行如下命令: `cat /proc/19463/environ` ,输出如下:

    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/gamesGNOME_KEYRING_PID=2269USER=jiangxinLANGUAGE=zh_CN:XDG_SEAT=seat0TEXTDOMAIN=im-configCOMPIZ_CONFIG_PROFILE=ubuntuHOME=/home/jiangxinQT4_IM_MODULE=fcitxDESKTOP_SESSION=ubuntuXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0GTK_MODULES=overlay-scrollbar:unity-gtk-moduleGNOME_KEYRING_CONTROL=/run/user/1000/keyring-wrFl7VQT_QPA_PLATFORMTHEME=appmenu-qt5MANDATORY_PATH=/usr/share/gconf/ubuntu.mandatory.pathIM_CONFIG_PHASE=1SESSIONTYPE=gnome-sessionLOGNAME=jiangxinGTK_IM_MODULE=fcitxDEFAULTS_PATH=/usr/share/gconf/ubuntu.default.pathXDG_SESSION_ID=c3GDM_LANG=zh_CNXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0XDG_RUNTIME_DIR=/run/user/1000DISPLAY=:0XDG_CURRENT_DESKTOP=UnityLANG=zh_CN.UTF-8XAUTHORITY=/home/jiangxin/.XauthorityXMODIFIERS=@im=fcitxXDG_GREETER_DATA_DIR=/var/lib/lightdm-data/jiangxinSHELL=/bin/bashGDMSESSION=ubuntuTEXTDOMAINDIR=/usr/share/locale/XDG_VTNR=7QT_IM_MODULE=ximPWD=/home/jiangxinXDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/usr/share/upstart/xdg:/etc/xdgXDG_DATA_DIRS=/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/CLUTTER_IM_MODULE=ximSELINUX_INIT=YESUBUNTU_MENUPROXY=1DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-BqwNaGt8wESSH_AUTH_SOCK=/run/user/1000/keyring-wrFl7V/sshSSH_AGENT_PID=2383SSH_AGENT_LAUNCHER=upstartGNOME_DESKTOP_SESSION_ID=this-is-deprecatedJOB=gnome-sessionINSTANCE=UnityUPSTART_EVENTS=started startingUPSTART_JOB=unity-settings-daemonUPSTART_INSTANCE=UPSTART_SESSION=unix:abstract=/com/ubuntu/upstart-session/1000/2299GPG_AGENT_INFO=/run/user/1000/keyring-wrFl7V/gpg:0:1

注意输出中的: `PWD=/data1/1230`。由此可以判断出程序`server-a`所在完成路径为: `/data1/1230/server-a`。来，验证一下吧:

```sh
bash-3.2# ls -l /data1/1230/server-a
-rwxr-xr-x 1 root root 5842 Feb 25 16:42 /data1/1230/server-a
```

`/proc/进程号`目录下的文件说明

* cwd符号链接的就是进程的运行目录；
* exe符号连接就是执行程序的绝对路径；
* cmdline就是程序运行时输入的命令行命令；
* cpu记录了进程可能运行在其上的cpu；显示虚拟的cpu信息
* environ记录了进程运行时的环境变量
* fd目录下是进程打开或使用的文件的符号连接

## Linux中C语言如何清空标准输入流

今天在Linux程序设计的时候需要清空标准输入缓冲区，于是使用了如下Windows程序设计中的方法: fflush(stdin)，这个fflush()函数根本不是标准C中的函数，只是标准C的扩展，所以在Linux中使用根本不行；在网上搜索了下，发现有网友建议使用rewind(stdin)；这个函数其实是将指针指向流的开始处。但是它是文件操作中的一个函数，操作的是FILE型流，在Windows程序设计中是可以清空标准输入缓冲区的，但是在Linux中不行。

注: 上述内容有几处错误，详见《The Standart Library》

Linux上可以通过getchar()函数读完标准缓冲区中的剩余字符来清空标准缓冲区:

```c
char ch;
while((ch=getchar())!='/n'&&ch!=EOF);
```

## 怎样给变量传递执行命令结果

在linux shell脚本里，设置一个变量，但是变量是一个命令，需要将执行结果放到变量里，并输出，例如: ip='ifconfig eth0'  echo $ip，怎样可以叫页面显示的是eth0的网络状况？就是ifconfig eth0的结果？

```shell
ip=`ifconfig eth0`
echo $ip
```

使用反引号可以把一个命令的输出插到另一个命令中去。相同功能的写法还有$()，功能同反引号效果是一样的。不过某些unix系统不支持$()这种写法。但是反引号在任何unix或linux系统下都可以使用。

## debian hosts文件中的 127.0.1.1 主机地址

有时候`/etc/hosts`文件会看到127.0.0.1这个地址,即本地接口的回路/回环地址。但有时候`/etc/hosts`文件中还会出现127.0.1.1,这也是个本地回路/回环地址。出现这个地址的原因是因为有些应用程序需要规范的全限定域名FQDN(Fully Qualified Domain Name)，FQDN不只需要主机名还需要主机域名，其表达形式为hostname.domainname。如果你的主机有一个静态IP地址，则FQDN名字解析到这个静态地址，否则解析到127.0.1.1这个本地回路地址。所以一般情况下不会看到127.0.1.1这个地址。127.0.0.1一般只对应hostname，这也是二者的主要区别。

```sh
127.0.0.1 hostname
127.0.1.1 hostname.domainname
```

当然并一定非要用127.0.1.1这个IP,RFC规定的127.0.0.0/8这个IP段内的任意IP都可以，只要没有冲突，debian选择了127.0.1.1

```sh
hostname # 查看主机名
hostname --fqdn # 查看FQDN名字
```

## 解决ubuntu终端颜色消失问题

ubuntukylin-13.10登陆用户使用ls命令，终端显示的所有输出都是黑底白字，没有彩色，`su - root`后使用ls命令，输出为彩色。分别在登陆用户和root用户下执行`echo $PS1` 输出有差异。后发现登陆用户目录下没有`.bashrc`文件。复制默认`.bashrc`文件后解决: `cp /etc/skel/.bashrc  ~/`。

## YUM相关问题解决

* yum history [undo|redo|info|...]: yum的子命令，显示你yum的历史记录，并且可以撤销指定的记录(undo)，重做指定记录(redo)等等，更多的功能看man yum
* yum-plugin-remove-with-leaves: 卸载软件包时把因此产生的叶子一起卸载掉，用的时候别加-y选项，看清楚了再确认，有些非常大的依赖树会把主要的系统组件卸载掉，具体用法安装完该插件以后看帮助:yum --help，这个yum插件应该就是最贴近你需求的，不过记住，慎用，如果能从yum history里查到记录的话，还是用yum history undo来操作比较安全。
* yum-plugin-show-leaves:  执行安装/卸载以后，显示此次操作所产生的叶子，自动运行，无需要操作。
* rpmreaper: 基于ncurses库的程序，通过基于文本的gui界面显示系统中的rpm依赖树，提供各种操作，具体的看man。
* yum update: 升级系统

### There are unfinished transactions remaining

使用yum安装东西报错:`There are unfinished transactions remaining. You might consider running yum-complete-transaction first to finish them.`。可能之前有强制结束yum过,解决办法如如下:

```sh
yum -y install yum-utils # 安装 yum-complete-transaction（这是一个能发现未完成或被中断的yum事务的程序）
yum clean all # 清除yum缓存
yum-complete-transaction --cleanup-only # 运行 yum-complete-transaction,清理未完成事务
```

注: yum会把下载的软件包和header存储在cache中,而不会自动删除.可用yum clean headers清除header,yum clean packages清除下载的rpm包,yum clean all全清.

### another app is currently holding the yum lock;waiting for it to exit

yum提示如标题，可能是系统自动升级正在运行，yum在锁定状态中。可以强制关掉yum进程: `rm -f /var/run/yum.pid`

## 设置开机直接进入命令行

16.04之前的Ubuntu版本，需编辑文件`/etc/default/grub`，把 `GRUB_CMDLINE_LINUX_DEFAULT=”quiet splash”`改成`GRUB_CMDLINE_LINUX_DEFAULT=”quiet splash text”`，然后运行`sudo update-grub`。在控制台下想进入x-window，可以在root用户下输入: `gdm`或者`startx`。

16.04及之后的Ubuntu版本，需要执行如下命令设置开机启动直接进入命令行或者恢复默认图形界面启动

```sh
sudo systemctl disable lightdm.service
sudo ln -s /lib/systemd/system/lightdm.service /etc/systemd/system/display-manager.service #恢复默认图形界面启动
```

CentOS/Redhat可以参考如下地址：<http://blog.csdn.net/zoubf/article/details/47607039>

## vSphere专题

* vSphere正确分配虚拟机CPU资源: <http://xjlegend.blog.51cto.com/59163/1642460>
* 如何通过Vmware vSphere Client安装虚拟机教程: <http://jingyan.baidu.com/article/bea41d439726c1b4c51be629.html>
* VMWARE ESXI 虚拟硬盘的格式:精简置备、厚置备延迟置零、厚置备置零: <http://blog.csdn.net/xiaoxing1521025/article/details/51282248>
* Download link for All Versions of VMware vSphere Client: <http://www.vmwarearena.com/download-link-for-all-versions-of-vmware-vsphere-client/>
* [vSphere 6] vmclicent连接单机时报错: <http://bbs.vmsky.com/thread-55705-1-1.html>
